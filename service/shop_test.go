package service

import (
    "encoding/json"
    "fmt"
    "github.com/go-redis/redis/v9"
    "implementation-scheme/models"
    "strconv"
    "testing"
)

func TestShopService_QueryShopByType(t *testing.T) {
    service := ShopService{db: db, rdb: rdb}
    shops := service.QueryShopByType(1, 1, 116.4645, 39.8655)
    if len(shops) == 0 {
        t.Log("没有数据了")
    } else {
        for _, shop := range shops {
            t.Logf("商铺名:%s 距离:%2fkm", shop.Name, shop.ShopDist)
        }
    }
}

type MeituanData struct {
    Status uint `json:"status"`
    Data   struct {
        Notification string        `json:"notification"`
        PicassoViews []interface{} `json:"picassoViews"`
        PoiList      struct {
            PoiInfos   []map[string]interface{} `json:"poiInfos"`
            TotalCount uint                     `json:"totalCount"`
        } `json:"poiList"`
    } `json:"data"`
}

func TestLoadShopData(t *testing.T) {
    var shops []*models.Shop
    db.Model(&models.Shop{}).Find(&shops)
    for _, shop := range shops {
        rdb.GeoAdd(
            ctx,
            fmt.Sprintf(shopTypeKey, shop.TypeId),
            &redis.GeoLocation{
                Name:      strconv.Itoa(int(shop.Id)),
                Longitude: shop.X,
                Latitude:  shop.Y,
            },
        )
    }
}

func TestInitShopTable(t *testing.T) {
    //oriData := []byte(`{"status":0,"data":{"poiList":{"totalCount":1000,"poiInfos":[{"avgPrice":30,"avgScore":4.6,"cateName":"西式快餐/汉堡","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/1454822468_1661505395345.jpeg","lat":39.8655,"lng":116.4645,"name":"肯德基（十里河永辉店）","poiid":"367445","areaName":"劲松/潘家园","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"5 份劲爆鸡米花(大)56元，6.66元1杯这么拼奶茶系列兑换券，9.9元奶茶随心选兑换券，9.9元汉堡兑换券，17.9元可盐可甜，19.9元薯条奶茶两件套，24.9元新奥尔良炒饭鸡翅，3 份热辣香骨鸡(3块装)兑换券28.5元，28.5元特惠汉堡三件套，29元午餐精选特惠套餐，29元午餐精选特惠套餐，35元香辣鸡腿堡，39元汁汁厚牛堡，5 份人气早餐（套餐4选1）兑换券42元，43元京味十足单人...","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a367445_c0_e4153162591485232151","extraServiceIcons":[],"distance":"248m"},{"avgPrice":19,"avgScore":4.5,"cateName":"日式快餐","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/2dac7d5d09097f28cf9f8f92c63add19961124.jpg","lat":39.8653,"lng":116.4652,"name":"吉野家（周家庄店）","poiid":"367449","areaName":"十里河","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"5元M52甜品大福，5元M38【新会员】金枪鱼土豆泥，8元M63鲐鱼1条，9.9元M16经典奶茶，9.9元M53鸡皿，17.9元M59新板烧饭套餐，18.9元M48京都麻辣肉酱汤面单人套餐，19.9元M36【单人餐】蕃柿鸡排面套餐，19.9元M50将军碗板烧辛麻鸡丁饭套餐，19.9元M64酸汤肥牛饭，19.9元M28【新】爽脆辣白菜鸡排饭套餐，19.9元M42爽脆辣白菜黑椒牛肉粒饭套餐，26.9元...","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a367449_c1_e4153162591485232151","extraServiceIcons":[],"distance":"294m"},{"avgPrice":35,"avgScore":4.1,"cateName":"西式快餐/汉堡","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/951699_1660014187443.jpeg","lat":39.8656,"lng":116.4599,"name":"麦当劳（大羊坊路店）","poiid":"372258","areaName":"劲松/潘家园","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"0.1元薯条（小）会员新人礼，2元脆薯饼，2元圆筒冰淇淋，4元圆筒冰淇淋，5元薯条（小），6元香芋派，6元脆香油条豆浆组合，7元雪菜脆笋鸡肉粥组合，7元火腿扒麦满分组合，7.9元可尔必思雪芭，9元原味板烧鸡腿麦满分组合，11.9元麦麦脆汁鸡，13.9元可尔必思麦旋风，13.9元薯条冰淇淋混搭组合，14.4元芭比Q脆汁鸡，15.9元可尔必思特饮，16.9元可尔必思雪芭特饮（蓝莓味），16.9元可尔必...","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a372258_c2_e4153162591485232151","extraServiceIcons":[],"distance":"379m"},{"avgPrice":15,"avgScore":4.3,"cateName":"奶茶/果汁","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/b152d2e5a0a2a00e1b7b321b0874221b442246.jpg","lat":39.866,"lng":116.4625,"name":"茶百道（十里河店）","poiid":"1979179324","areaName":"十里河","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"十里河饮品人气榜第1名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"6.66元爆品-冷萃茶，11.44元珍珠奶茶（大杯），11.62元海盐焦糖奶茶（中杯），12.35元招牌-茉莉奶绿(大杯)，12.75元黄金椰椰乌龙（大杯），14.72元元气桃桃奶茶（大杯），14.9元招牌芋圆奶茶（大杯），15.68元西瓜啵啵（大杯），16.72元暴打柠檬绿茶（大杯），17.1元手捣葡萄冻冻（大杯），17.1元芒芒生打椰（大杯），17.9元草莓奶冻，20.24元超级杯水果茶（芒果...","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"招牌推荐","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a1979179324_c3_e4153162591485232151","extraServiceIcons":[],"distance":"197m"},{"avgPrice":17,"avgScore":4.1,"cateName":"西式快餐/汉堡","channel":"food","showType":"","frontImg":"//p1.meituan.net/biztone/169314868_1653626451765.jpeg","lat":39.8611,"lng":116.4625,"name":"华莱士·全鸡汉堡（十里河店）","poiid":"175303831","areaName":"方庄/蒲黄榆","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"10.9元香辣鸡排堡三件套，18元超值单人餐，18元超值单人餐，22.9元香辣鸡腿堡+辣味，28元脆皮鸡单人餐，48元超值双人套餐","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a175303831_c4_e4153162591485232151","extraServiceIcons":[],"distance":"727m"},{"avgPrice":7,"avgScore":3.9,"cateName":"奶茶/果汁","channel":"food","showType":"","frontImg":"//p0.meituan.net/bizgateway/84add0ee1551f1a2570af5b9e62222ee115524.jpg","lat":39.8669,"lng":116.4577,"name":"蜜雪冰城（十里河店）","poiid":"1297479257","areaName":"十里河","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"十里河饮品人气榜第2名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"11 份柠檬水44元，2元华夫冰淇淋，3.5元柠檬水，3.99元伯爵红茶，4元绿茶，4元四季春茶（热/冰），5.5元草莓摇摇奶昔，5.5元蜜桃四季春，5.5元珍珠奶茶（热/冰），6元芒果雪王大圣代，6元草莓圣代，6元草莓摇摇奶昔，6元黑糖珍珠大圣代，7元椰果奶茶（中杯），7元666满杯百香果，2 份绿茶8元，2 份红茶8元，2 份四季春茶8元，8元三拼霸霸奶茶，2 份芒果雪王大圣代12元，2 份草...","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a1297479257_c5_e4153162591485232151","extraServiceIcons":[],"distance":"502m"},{"avgPrice":17,"avgScore":4.4,"cateName":"快餐简餐","channel":"food","showType":"","frontImg":"//p1.meituan.net/biztone/846522825_1657098653808.jpeg","lat":39.866,"lng":116.4597,"name":"麦多和馅饼（十里河店）","poiid":"846522825","areaName":"十里河","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"十里河小吃快餐人气榜第1名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"8.9元招牌必点，24.9元超值单人餐，39.9元双人套餐","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"30代35元，50代60元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a846522825_c6_e4153162591485232151","extraServiceIcons":[],"distance":"370m"},{"avgPrice":35,"avgScore":4.1,"cateName":"卤味鸭脖","channel":"food","showType":"","frontImg":"//p1.meituan.net/biztone/4b393ff39431feb26575b46f05c4fa93130318.jpg","lat":39.8658,"lng":116.464,"name":"绝味鸭脖（山水文园店）","poiid":"1834437617","areaName":"十里河","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"十里河小吃快餐人气榜第8名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"5 份绝味小龙虾虾球195元，8.9元素菜任选150克，43.9元绝味小龙虾虾球，49.9元绝味小龙虾虾球+素菜，53.9元绝味小龙虾虾球+素菜+鸡翅尖，53.9元绝味小龙虾虾球+素菜+鸭翅中，55.9元绝味小龙虾虾球+鸭锁骨，58.9元绝味小龙虾虾球+鸭掌，61.9元绝味小龙虾虾球+鸭脖，3 份绝味小龙虾虾球124.8元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"55代60元，90代100元，89.9代100元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a1834437617_c7_e4153162591485232151","extraServiceIcons":[],"distance":"204m"},{"avgPrice":66,"avgScore":4.6,"cateName":"烤鱼","channel":"food","showType":"","frontImg":"//p1.meituan.net/merchant/b6f21b7f91b9a1286233129d8ada9537107483.jpg","lat":39.8661,"lng":116.4624,"name":"蜀风香辣馆烤鱼（十里河店）","poiid":"180588001","areaName":"十里河","poiImgExtra":{},"extraServiceTags":[{"icon":"","text":{"content":"支持预订","color":"#6cbab2","backgroundColor":""}}],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"十里河川湘菜人气榜第1名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":3,"entries":[{"discount":"","discountColor":"#38c2aa","content":"4人餐142元起，双人餐158元，2-3人餐188元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"立减18元","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"44代50元，88代100元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"","content":"买单立享满100减12","icon":"http://p1.meituan.net/codeman/3b56ab9f3824afb2781e12bd2fbb0a761558.png","promotion":"","hasBorder":1,"borderColor":"#FF8822"}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a180588001_c8_e4153162591485232151","extraServiceIcons":[],"distance":"191m"},{"avgPrice":19,"avgScore":4.4,"cateName":"面包蛋糕","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/291334_1660018177332.jpeg","lat":39.867,"lng":116.4572,"name":"味多美蛋糕（十里河地铁店）","poiid":"179198590","areaName":"十里河","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"1元味多美老婆饼，1.5元枫糖牛角面包，3.25元葡式蛋挞单粒装，法式月饼 榛巧/蓝莓/乳酪/玫瑰乳酪 4选1 1 个，5元拿铁咖啡，现烤现做 肉月饼 1 个，5.4元热狗面包，5.9元味多美松松面包，6元小不点系列面包，经典五仁月饼（单粒装） 1 个，9元流心蛋黄酥糕点，9.5元熊猫饼干，9.9元满杯百香果复合果汁饮料，9.9元杨枝甘露，9.9元小圆蜂蜜蛋糕，9.9元蓝莓曲奇饼干，法式流心蛋黄月...","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"1代3元，45代50元，59代60元，70代80元，95代100元，176代200元，270代300元，450代500元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a179198590_c9_e4153162591485232151","extraServiceIcons":[],"distance":"542m"},{"avgPrice":20,"avgScore":4.4,"cateName":"羊肉汤","channel":"food","showType":"","frontImg":"//p1.meituan.net/merchant/dd9aee3dcc81dbd470595ba37d73de77176424.jpg","lat":39.8658,"lng":116.4598,"name":"武圣羊汤（十里河店）","poiid":"160148912","areaName":"十里河","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"十里河小吃快餐人气榜第3名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"9.4元TG02酸辣羊汤米线，13.9元TG05单人超值套餐（早餐），14.99元TG07葱油拌面套餐，16.99元TG03剁椒鸡蛋拌面套餐，21.9元TG01羊杂汤单人套餐，88元TG04骨汤羊蝎子（家庭装）","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a160148912_c10_e4153162591485232151","extraServiceIcons":[],"distance":"374m"},{"avgPrice":66,"avgScore":4.1,"cateName":"特色火锅","channel":"food","showType":"","frontImg":"https://img.meituan.net/msmerchant/42cd776ca40313b00ddb051c272c5bc51834555.jpg","lat":39.8687,"lng":116.4673,"name":"火锅林（南新园店）","poiid":"858861876","areaName":"劲松/潘家园","poiImgExtra":{},"extraServiceTags":[{"icon":"","text":{"content":"支持预订","color":"#6cbab2","backgroundColor":""}}],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"劲松/潘家园火锅好评榜第10名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"双人餐108元，3-4人餐168元，3人餐248元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"85代100元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a858861876_c11_e4153162591485232151","extraServiceIcons":[],"distance":"347m"},{"avgPrice":25,"avgScore":5,"cateName":"熟食熏酱","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/66b391284c0eaa24afb8d85cdd381622846293.jpg","lat":39.8654,"lng":116.4648,"name":"紫光园清真北京小吃（弘燕永辉店）","poiid":"1414428219","areaName":"十里河","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"十里河小吃快餐人气榜第2名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"1元麻酱烧饼，2.5元中秋月饼，8.8元紫光园甑糕，双人餐58元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"46代50元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a1414428219_c12_e4153162591485232151","extraServiceIcons":[],"distance":"268m"},{"avgPrice":70,"avgScore":4.2,"cateName":"京菜","channel":"food","showType":"","frontImg":"//p0.meituan.net/merchant/71e67a187935be9ee4027bb826776c1a208729.jpg","lat":39.8664,"lng":116.4622,"name":"京和轩北京胡同菜","poiid":"6097248","areaName":"十里河","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"双人餐78元起，3-4人餐138元，5-6人餐312元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"90代100元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a6097248_c13_e4153162591485232151","extraServiceIcons":[],"distance":"173m"},{"avgPrice":34,"avgScore":4.5,"cateName":"炸鸡炸串","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/2e4ce2e799025ec018a04f990eaa27ca286126.jpg","lat":39.8653,"lng":116.4646,"name":"夸父炸串（十里河永辉店）","poiid":"1158727370","areaName":"十里河","poiImgExtra":{},"extraServiceTags":[{"icon":"","text":{"content":"支持买单","color":"#6cbab2","backgroundColor":""}}],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"十里河小吃快餐人气榜第9名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"5.78元巴掌大鸡排1串，32.9元夸父必点单人餐，39.9元无肉不欢单人餐","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"立减2元","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"35代40元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"339745283957979428364721890664668562413_a1158727370_c14_e4153162591485232151","extraServiceIcons":[],"distance":"272m"}]},"notification":"","picassoViews":[],"traceData":{"_apimeishi_rerank_report_data":""}}}`)
    oriData := []byte(`{"status":0,"data":{"poiList":{"totalCount":800,"poiInfos":[{"avgPrice":92,"avgScore":3.9,"cateName":"自助海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/1692065463_1657375568791.jpeg","lat":39.7029,"lng":115.984,"name":"微海鲜生蚝自助（城关店）","poiid":"1692065463","areaName":"城关街道","poiImgExtra":{},"extraServiceTags":[{"icon":"","text":{"content":"支持买单","color":"#6cbab2","backgroundColor":""}}],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"房山区鱼鲜海鲜人气榜第2名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"单人餐96元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a1692065463_c0_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":88,"avgScore":4.4,"cateName":"海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/1087068512_1651321444531.jpeg","lat":39.8863,"lng":116.6495,"name":"肆带贰丹东小海鲜（九棵树店）","poiid":"1087068512","areaName":"九棵树","poiImgExtra":{},"extraServiceTags":[{"icon":"","text":{"content":"支持买单","color":"#6cbab2","backgroundColor":""}},{"icon":"","text":{"content":"预订","color":"#6cbab2","backgroundColor":""}}],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"通州区鱼鲜海鲜好评榜第6名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"双人餐99元起，4人餐238元起","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"开业减30","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"45代50元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a1087068512_c1_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":83,"avgScore":4.9,"cateName":"海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/1932240936_1660459073638.jpeg","lat":40.0786,"lng":116.3319,"name":"晧渔港蒸汽海鲜·顺德菜（回龙观店）","poiid":"1932240936","areaName":"回龙观","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"北京鱼鲜海鲜人气榜第1名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"双人餐168元起，4人餐428元，2-3人餐1199元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"立减10元","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"95代100元，92代100元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a1932240936_c2_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":80,"avgScore":4.7,"cateName":"海鲜","channel":"food","showType":"","frontImg":"https://img.meituan.net/msmerchant/9e31acf6a9c3eaa5db3feae0a93ff876161863.jpg","lat":39.9245,"lng":116.6006,"name":"自在角落海鲜（长楹天街店）","poiid":"159657927","areaName":"常营","poiImgExtra":{},"extraServiceTags":[{"icon":"","text":{"content":"支持预订","color":"#6cbab2","backgroundColor":""}}],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"常营鱼鲜海鲜好评榜第1名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"双人餐138元起，3-4人餐198元起","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"限时减20","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"78代100元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a159657927_c3_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":54,"avgScore":5,"cateName":"海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/ugcpic/8e07a3fcfd9c309a6d02bbb035c4a650","lat":39.8499,"lng":116.3968,"name":"温州海鲜排档","poiid":"1921027712","areaName":"洋桥/木樨园","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"丰台区鱼鲜海鲜好评榜第3名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"单人餐23.8元，双人餐158元，3-4人餐345元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"88代100元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a1921027712_c4_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":85,"avgScore":3.7,"cateName":"自助海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/1741121968_1656829650272.jpeg","lat":39.7248,"lng":116.1739,"name":"微海鲜生蚝自助专门店（大学城店）","poiid":"1741121968","areaName":"良乡","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"房山区鱼鲜海鲜人气榜第1名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"单人餐96元起","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a1741121968_c5_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":149,"avgScore":4.8,"cateName":"海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/195903775_1650811083950.jpeg","lat":39.9473,"lng":116.3412,"name":"海簋·蒸汽海鲜（西直门店）","poiid":"1931758699","areaName":"北下关","poiImgExtra":{},"extraServiceTags":[{"icon":"","text":{"content":"支持预订","color":"#6cbab2","backgroundColor":""}}],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"北下关美食好评榜第3名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":3,"entries":[{"discount":"","discountColor":"#38c2aa","content":"双人餐158元起，4人餐428元起，6人餐2088元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"限时减100","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"96代100元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"","content":"买单立享满100减4","icon":"http://p1.meituan.net/codeman/3b56ab9f3824afb2781e12bd2fbb0a761558.png","promotion":"","hasBorder":1,"borderColor":"#FF8822"}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a1931758699_c6_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":89,"avgScore":4,"cateName":"海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/162711906_1651050008500.jpeg","lat":39.8825,"lng":116.3123,"name":"渤海湾海鲜烧烤（六里桥店）","poiid":"162711906","areaName":"北京西站/六里桥","poiImgExtra":{},"extraServiceTags":[{"icon":"","text":{"content":"支持买单","color":"#6cbab2","backgroundColor":""}},{"icon":"","text":{"content":"预订","color":"#6cbab2","backgroundColor":""}}],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"丰台区鱼鲜海鲜好评榜第9名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"双人餐128元起，4人餐128元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"95代100元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a162711906_c7_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":80,"avgScore":4.7,"cateName":"海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/100589158_1650862010956.jpeg","lat":40.1395,"lng":116.6219,"name":"海蒸鲜·蒸汽海鲜（顺义店）","poiid":"100589158","areaName":"顺义","poiImgExtra":{},"extraServiceTags":[{"icon":"","text":{"content":"支持预订","color":"#6cbab2","backgroundColor":""}}],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"顺义区鱼鲜海鲜人气榜第1名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"单人餐19.9元，双人餐189元起，4人餐599元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"立减10元","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"18.5代20元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a100589158_c8_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":88,"avgScore":3.8,"cateName":"自助海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/6399484_1624861938332.jpeg","lat":40.0602,"lng":116.4149,"name":"永远爱烤肉火锅自助（龙德广场店）","poiid":"6399484","areaName":"天通苑","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"天通苑自助餐人气榜第1名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"单人自助85.9元起","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a6399484_c9_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":100,"avgScore":4.6,"cateName":"海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/1418358759_1650264871971.jpeg","lat":40.129,"lng":116.6488,"name":"海之道·蒸汽海鲜（府前西街店）","poiid":"1418358759","areaName":"顺义","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"顺义鱼鲜海鲜人气榜第5名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"单人餐19.8元，双人餐188元起，4人餐598元，6人餐898元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a1418358759_c10_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":83,"avgScore":4.4,"cateName":"海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/merchant/646ddd3757171a18e80bcaf4e5c08bf0128556.jpg","lat":39.8778,"lng":116.6772,"name":"虾潮蟹海蒸海鲜（梨园小街店）","poiid":"158904593","areaName":"梨园","poiImgExtra":{},"extraServiceTags":[{"icon":"","text":{"content":"支持预订","color":"#6cbab2","backgroundColor":""}}],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"梨园鱼鲜海鲜人气榜第3名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"双人餐129元，6人餐398元，8人餐988元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a158904593_c11_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":67,"avgScore":3.2,"cateName":"自助海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/bbia/c3ea10490170dfa9d0280a7d0d7ee32e349965.jpg","lat":40.1334,"lng":116.699,"name":"尚品宫海鲜烤肉自助餐厅（俸伯店）","poiid":"194429999","areaName":"顺义","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"smartTags":[{"icon":"","text":{"content":"顺义鱼鲜海鲜人气榜第3名","color":"#be9e4d","backgroundColor":"#fbf4e4","borderColor":""}}],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":1,"entries":[{"discount":"","discountColor":"#38c2aa","content":"单人自助68元，双人自助136元，4人自助272元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a194429999_c12_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":49,"avgScore":4.7,"cateName":"海鲜","channel":"food","showType":"","frontImg":"//p0.meituan.net/biztone/866052189_1658403727227.jpeg","lat":39.8242,"lng":116.2981,"name":"奈斯捞汁小海鲜","poiid":"866052189","areaName":"世界公园","poiImgExtra":{},"extraServiceTags":[{"icon":"","text":{"content":"支持买单","color":"#6cbab2","backgroundColor":""}}],"rotationTags":[],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"单人餐8.8元，双人餐68元起","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"8代10元，50代60元，100代125元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a866052189_c13_e2164428796085066737","extraServiceIcons":[],"distance":">100km"},{"avgPrice":0,"avgScore":4.3,"cateName":"海鲜","channel":"food","showType":"","frontImg":"https://img.meituan.net/msmerchant/1ee2193ce59c8e127dc5d85ba3ce53801053624.png","lat":39.9588,"lng":116.2851,"name":"绅海汇·蒸汽海鲜（世纪金源店）","poiid":"1321975849","areaName":"远大路","poiImgExtra":{},"extraServiceTags":[],"rotationTags":[],"preferentialInfo":{"hiddenNumber":0,"maidan":{"defaultShowNum":2,"entries":[{"discount":"","discountColor":"#38c2aa","content":"双人餐269元，3-4人餐498元，5-6人餐798元","icon":"https://p1.meituan.net/travelcube/734c7f818631a0aa8e49a814b90b1b771242.png","promotion":"","hasBorder":0,"borderColor":""},{"discount":"","discountColor":"#ff8822","content":"90代100元","icon":"http://p1.meituan.net/codeman/5b202af2ecf82c69a433a246296ca4791278.png","hasBorder":0,"borderColor":""}]},"combo":{"defaultShowNum":0,"entries":[]}},"ctPoi":"010087314445268730257400423829313885506_a1321975849_c14_e2164428796085066737","extraServiceIcons":[],"distance":">100km"}]},"notification":"","picassoViews":[],"traceData":{"_apimeishi_rerank_report_data":""}}}`)
    var data MeituanData
    _ = json.Unmarshal(oriData, &data)
    
    for _, item := range data.Data.PoiList.PoiInfos {
        shop := &models.Shop{
            TypeId:   11,
            Name:     item["name"].(string),
            Images:   item["frontImg"].(string),
            Area:     item["areaName"].(string),
            Address:  item["areaName"].(string),
            X:        item["lng"].(float64),
            Y:        item["lat"].(float64),
            AvgPrice: int(item["avgPrice"].(float64)),
            Score:    int(item["avgScore"].(float64)),
        }
        db.Create(shop)
    }
}
